<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
</head>
<body>
    <h1>ğŸ”§ ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… ØªØ±Ø­Ø§Ù„</h1>
    <div id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©...</div>
    
    <script>
    async function initialize() {
        const status = document.getElementById('status');
        
        try {
            status.innerHTML = '1. Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Supabase...';
            
            // Ø§Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ supabaseClient
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            if (!window.supabaseClient) {
                throw new Error('supabaseClient ØºÙŠØ± Ù…Ø¹Ø±Ù');
            }
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù…Ù„ÙŠ
            const { data, error } = await window.supabaseClient
                .from('users')
                .select('id, phone, full_name')
                .limit(3);
            
            if (error) {
                status.innerHTML = `
                    <h3 style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Supabase</h3>
                    <p>${error.message}</p>
                    <p>${error.details || ''}</p>
                    <p>${error.hint || ''}</p>
                    <hr>
                    <h4>ğŸ’¡ Ø§Ù„Ø­Ù„:</h4>
                    <ol>
                        <li>Ø§ÙØªØ­ <a href="https://supabase.com/dashboard/project/yfumkrfhccwvvfiimhjr/sql" target="_blank">Supabase SQL Editor</a></li>
                        <li>Ø§Ù†Ø³Ø® ÙƒÙˆØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</li>
                        <li>Ø§Ø¶ØºØ· RUN</li>
                        <li>Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©</li>
                    </ol>
                `;
                return;
            }
            
            status.innerHTML = `
                <h3 style="color: green;">âœ… ØªÙ‡ÙŠØ¦Ø© Ù†Ø§Ø¬Ø­Ø©!</h3>
                <p>ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Supabase Ø¨Ù†Ø¬Ø§Ø­</p>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ${data?.length || 0}</p>
                <button onclick="window.location.href='index.html'">
                    Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
            `;
            
        } catch (error) {
            status.innerHTML = `
                <h3 style="color: red;">âŒ Ø®Ø·Ø£</h3>
                <p>${error.message}</p>
                <pre>${error.stack}</pre>
            `;
        }
    }
    
    // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>