<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุทูุจ ุฑุญูุฉ - ุชุฑุญุงู</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="request-container">
        <!-- Header -->
        <header class="request-header">
            <a href="index.html" class="back-btn">โ ุงูุนูุฏุฉ</a>
            <div class="header-title">
                <h1>ุทูุจ ุฑุญูุฉ ุฌุฏูุฏุฉ</h1>
                <p>ุฃุฏุฎู ุชูุงุตูู ุฑุญูุชู</p>
            </div>
        </header>

        <main class="request-main">
            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step active">
                    <div class="step-number">1</div>
                    <span>ุงููุฌูุฉ</span>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <span>ููุน ุงูุฑุญูุฉ</span>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <span>ุงูุชุฃููุฏ</span>
                </div>
            </div>

            <!-- Step 1: Locations -->
            <div class="step-content active" id="step1">
                <div class="location-inputs">
                    <div class="input-card pickup">
                        <div class="input-icon">๐</div>
                        <div class="input-content">
                            <label>ูููุน ุงูุงูุชูุงุท</label>
                            <input type="text" id="pickupInput" 
                                   placeholder="ุฃุฏุฎู ูููุนู ุงูุญุงูู">
                            <button class="btn-location" id="currentLocationBtn">
                                ุงุณุชุฎุฏุงู ุงููููุน ุงูุญุงูู
                            </button>
                        </div>
                    </div>
                    
                    <div class="input-card dropoff">
                        <div class="input-icon">๐</div>
                        <div class="input-content">
                            <label>ุงููุฌูุฉ</label>
                            <input type="text" id="dropoffInput" 
                                   placeholder="ุฃูู ุชุฑูุฏ ุงูุฐูุงุจุ">
                            <div class="saved-locations" id="savedLocations">
                                <!-- ุงูููุงูุน ุงููุญููุธุฉ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="suggested-locations">
                    <h4>ููุงูุน ููุชุฑุญุฉ:</h4>
                    <div class="location-buttons">
                        <button class="location-btn" data-location="ูุทุงุฑ ุงูุฎุฑุทูู">
                            โ๏ธ ูุทุงุฑ ุงูุฎุฑุทูู
                        </button>
                        <button class="location-btn" data-location="ุณูู ุฃู ุฏุฑูุงู">
                            ๐๏ธ ุณูู ุฃู ุฏุฑูุงู
                        </button>
                        <button class="location-btn" data-location="ุฌุงูุนุฉ ุงูุฎุฑุทูู">
                            ๐ ุฌุงูุนุฉ ุงูุฎุฑุทูู
                        </button>
                        <button class="location-btn" data-location="ุงููุณุชุดูู ุงูุณูุงุญ ุงูุทุจู">
                            ๐ฅ ุงููุณุชุดูู ุงูุณูุงุญ ุงูุทุจู
                        </button>
                    </div>
                </div>
                
                <button class="btn-primary btn-next" id="nextStep1">
                    ุงูุชุงูู โ ุงุฎุชูุงุฑ ุงูุณูุงุฑุฉ
                </button>
            </div>

            <!-- Step 2: Car Type -->
            <div class="step-content" id="step2">
                <h3>ุงุฎุชุฑ ููุน ุงูุฑุญูุฉ</h3>
                
                <div class="car-options">
                    <div class="car-option active" data-type="standard">
                        <div class="car-icon">๐</div>
                        <div class="car-details">
                            <h4>ุนุงุฏู</h4>
                            <p>ุณูุงุฑุฉ ูุฑูุญุฉ ุชูุงุณุจ 4 ุฑูุงุจ</p>
                            <div class="car-price">
                                <span>ุงุจุชุฏุงุกู ูู</span>
                                <span class="price">3,000 SDG</span>
                            </div>
                        </div>
                        <div class="car-check">โ</div>
                    </div>
                    
                    <div class="car-option" data-type="comfort">
                        <div class="car-icon">๐</div>
                        <div class="car-details">
                            <h4>ูุฑูุญ</h4>
                            <p>ุณูุงุฑุฉ ูุงุฎุฑุฉ ูุน ูุฒุงูุง ุฅุถุงููุฉ</p>
                            <div class="car-price">
                                <span>ุงุจุชุฏุงุกู ูู</span>
                                <span class="price">4,500 SDG</span>
                            </div>
                        </div>
                        <div class="car-check">โ</div>
                    </div>
                    
                    <div class="car-option" data-type="van">
                        <div class="car-icon">๐</div>
                        <div class="car-details">
                            <h4>ูุงู</h4>
                            <p>ุชูุงุณุจ 7 ุฑูุงุจ ุฃู ุฃูุชุนุฉ ุฅุถุงููุฉ</p>
                            <div class="car-price">
                                <span>ุงุจุชุฏุงุกู ูู</span>
                                <span class="price">6,000 SDG</span>
                            </div>
                        </div>
                        <div class="car-check">โ</div>
                    </div>
                </div>
                
                <div class="trip-options">
                    <h4>ุฎูุงุฑุงุช ุฅุถุงููุฉ:</h4>
                    <div class="options-grid">
                        <label class="option-checkbox">
                            <input type="checkbox" id="needHelp">
                            <span>๐จโ๐ฆฝ ุฃุญุชุงุฌ ูุณุงุนุฏุฉ</span>
                        </label>
                        <label class="option-checkbox">
                            <input type="checkbox" id="quietRide">
                            <span>๐คซ ุฑุญูุฉ ูุงุฏุฆุฉ</span>
                        </label>
                        <label class="option-checkbox">
                            <input type="checkbox" id="extraStops">
                            <span>๐ ุชูููุงุช ุฅุถุงููุฉ</span>
                        </label>
                        <label class="option-checkbox">
                            <input type="checkbox" id="petFriendly">
                            <span>๐พ ูุน ุญููุงู ุฃููู</span>
                        </label>
                    </div>
                </div>
                
                <div class="step-buttons">
                    <button class="btn-outline" id="backStep2">โ ุฑุฌูุน</button>
                    <button class="btn-primary" id="nextStep2">
                        ุงูุชุงูู โ ุนุฑุถ ุงูุณุนุฑ
                    </button>
                </div>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="step-content" id="step3">
                <h3>ุชุฃููุฏ ุงูุฑุญูุฉ</h3>
                
                <div class="trip-summary">
                    <div class="summary-item">
                        <span>ุงููุฌูุฉ:</span>
                        <span id="summaryPickup">ูููุนู ุงูุญุงูู</span>
                    </div>
                    <div class="summary-item">
                        <span>ุงููุฌูุฉ:</span>
                        <span id="summaryDropoff">ุงููุทุงุฑ ุงูุฏููู</span>
                    </div>
                    <div class="summary-item">
                        <span>ููุน ุงูุณูุงุฑุฉ:</span>
                        <span id="summaryCarType">ุนุงุฏู</span>
                    </div>
                    <div class="summary-item">
                        <span>ุงููุณุงูุฉ:</span>
                        <span id="summaryDistance">8.5 ูู</span>
                    </div>
                    <div class="summary-item">
                        <span>ุงูููุช ุงููุชููุน:</span>
                        <span id="summaryTime">20 ุฏูููุฉ</span>
                    </div>
                    <div class="summary-item total">
                        <span>ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ:</span>
                        <span class="total-price" id="summaryPrice">3,000 SDG</span>
                    </div>
                </div>
                
                <div class="payment-method">
                    <h4>ุทุฑููุฉ ุงูุฏูุน:</h4>
                    <div class="payment-options">
                        <div class="payment-option active">
                            <input type="radio" name="payment" id="cash" checked>
                            <label for="cash">๐ต ููุฏุงู ุนูุฏ ุงููุตูู</label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" name="payment" id="wallet">
                            <label for="wallet">๐ฐ ูุญูุธุฉ ุชุฑุญุงู</label>
                        </div>
                    </div>
                </div>
                
                <div class="confirm-terms">
                    <label class="checkbox">
                        <input type="checkbox" id="agreeTerms" required>
                        <span>ุฃูุงูู ุนูู <a href="terms.html">ุดุฑูุท ุงูุงุณุชุฎุฏุงู</a></span>
                    </label>
                </div>
                
                <div class="step-buttons">
                    <button class="btn-outline" id="backStep3">โ ุฑุฌูุน</button>
                    <button class="btn-primary" id="confirmTripBtn" disabled>
                        ๐ ุชุฃููุฏ ุทูุจ ุงูุฑุญูุฉ
                    </button>
                </div>
            </div>
        </main>

        <!-- Trip Request Modal -->
        <div class="modal-overlay" id="requestingModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ุฌุงุฑู ุทูุจ ุงูุฑุญูุฉ</h3>
                </div>
                <div class="modal-body">
                    <div class="loading-animation">
                        <div class="loader"></div>
                        <p>ุฌุงุฑู ุงูุจุญุซ ุนู ุณุงุฆู...</p>
                    </div>
                    
                    <div class="searching-info">
                        <div class="info-item">
                            <span>ุชู ุงูุจุญุซ ูู:</span>
                            <span id="searchArea">ูุทุงู 20 ูู</span>
                        </div>
                        <div class="info-item">
                            <span>ุงูุณุงุฆููู ุงููุชุงุญูู:</span>
                            <span id="availableDrivers">3 ุณุงุฆููู</span>
                        </div>
                    </div>
                    
                    <button class="btn-danger" id="cancelRequestBtn">ุฅูุบุงุก ุงูุทูุจ</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/supabase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/request-trip.js"></script>
</body>
</html>